# ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∑–∞–≤–µ—Ä—à—ë–Ω! –¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å —Å–≤–æ–∏ —Ç–æ–∫–µ–Ω—ã.

### –®–∞–≥ 1: –ó–∞–ø–æ–ª–Ω–∏ .env.prod (–ø—Ä–æ–¥–∞–∫—à–Ω)

```bash
# –û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª
nano .env.prod  # –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π –ª—é–±–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
```

–ó–∞–º–µ–Ω–∏ `your_xxx_here` –Ω–∞ —Å–≤–æ–∏ –Ω–∞—Å—Ç–æ—è—â–∏–µ –∫–ª—é—á–∏:
- `BOT_TOKEN` - —Ç–æ–∫–µ–Ω –ø—Ä–æ–¥–∞–∫—à–Ω –±–æ—Ç–∞ (–æ—Ç @BotFather)
- `OPENAI_API_KEY` - —Ç–≤–æ–π OpenAI API –∫–ª—é—á
- `POSTGRES_PASSWORD` - –ø–∞—Ä–æ–ª—å –æ—Ç PostgreSQL
- `HELPER_ID`, `SOULSLEEP_ID` –∏ –¥—Ä. - ID —Ç–≤–æ–∏—Ö Assistant'–æ–≤

### –®–∞–≥ 2: –ó–∞–ø–æ–ª–Ω–∏ .env.test (—Ç–µ—Å—Ç–æ–≤—ã–π)

```bash
# –û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª
nano .env.test  # –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π –ª—é–±–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
```

**–í–∞–∂–Ω–æ:** –í .env.test —É–∂–µ —É–∫–∞–∑–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π BOT_TOKEN!  
–ó–∞–º–µ–Ω–∏ —Ç–æ–ª—å–∫–æ:
- `OPENAI_API_KEY`
- `POSTGRES_PASSWORD`
- ID –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –ó–∞–ø—É—Å—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫—É
python test_refactoring.py
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
‚úÖ Production –æ–∫—Ä—É–∂–µ–Ω–∏–µ: PASSED
‚úÖ Test –æ–∫—Ä—É–∂–µ–Ω–∏–µ: PASSED
üéâ –í–°–ï –ü–†–û–í–ï–†–ö–ò –ü–†–û–ô–î–ï–ù–´!
```

### –®–∞–≥ 4: –ó–∞–ø—É—Å–∫

```bash
# –ü—Ä–æ–¥–∞–∫—à–Ω
ENV=prod python bot.py
# –∏–ª–∏
../scripts/run_prod.sh

# –¢–µ—Å—Ç
ENV=test python bot.py
# –∏–ª–∏
../scripts/run_test.sh
```

---

## Troubleshooting

### ‚ùå –û—à–∏–±–∫–∞: "BOT_TOKEN –Ω–µ –Ω–∞–π–¥–µ–Ω"
–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –≤ .env —Ñ–∞–π–ª–µ –Ω–µ—Ç –æ–ø–µ—á–∞—Ç–æ–∫ –∏ —Ç–æ–∫–µ–Ω –Ω–µ –ø—É—Å—Ç–æ–π.

### ‚ùå –û—à–∏–±–∫–∞: "OPENAI_API_KEY –Ω–µ –Ω–∞–π–¥–µ–Ω"
–í—Å—Ç–∞–≤—å —Å–≤–æ–π –∫–ª—é—á –æ—Ç OpenAI –≤–º–µ—Å—Ç–æ `your_openai_api_key_here`.

### ‚ùå –ë–î –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
–ü—Ä–æ–≤–µ—Ä—å:
1. PostgreSQL –∑–∞–ø—É—â–µ–Ω
2. `POSTGRES_PASSWORD` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
3. –ë–∞–∑—ã `soul_bot` –∏ `soul_test_bot` —Å–æ–∑–¥–∞–Ω—ã

```bash
# –°–æ–∑–¥–∞–π –±–∞–∑—ã –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
psql -U postgres -c "CREATE DATABASE soul_bot;"
psql -U postgres -c "CREATE DATABASE soul_test_bot;"
```

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–ê–ñ–ù–û:** .env.prod –∏ .env.test —Å–æ–¥–µ—Ä–∂–∞—Ç —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏!

- ‚úÖ –û–Ω–∏ –≤ `.gitignore` - –Ω–µ –ø–æ–ø–∞–¥—É—Ç –≤ git
- ‚ùå –ù–ï –∫–æ–º–º–∏—Ç—å –∏—Ö –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- ‚ùå –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≤ Telegram/Discord
- ‚úÖ –•—Ä–∞–Ω–∏—Ç—å –≤ password manager

---

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–∂–µ—à—å:
1. –£–¥–∞–ª–∏—Ç—å `soul_test_bot/` –ø–∞–ø–∫—É (–±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–∞)
2. –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
3. –ù–∞—á–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É —Å –∫–æ–º—Ñ–æ—Ä—Ç–æ–º!

```bash
# –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—É—é –ø–∞–ø–∫—É
cd /Users/nikitagorokhov/dev/SoulNear
rm -rf soul_test_bot

# –ö–æ–º–º–∏—Ç–∏–º
cd soul_bot
git add .
git commit -m "refactor: unified soul_bot and soul_test_bot with .env configs"
```


