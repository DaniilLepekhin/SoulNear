# üöÄ Docker Quick Start

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∑–∞ 3 —à–∞–≥–∞

```bash
# 1. –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥
make setup

# 2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å .env.prod
# –ó–∞–ø–æ–ª–Ω–∏ BOT_TOKEN, OPENAI_API_KEY, POSTGRES_PASSWORD –∏ –æ—Å—Ç–∞–ª—å–Ω–æ–µ

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å
make up
```

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
make up          # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ
make down        # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ
make logs        # –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
make restart     # –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ
make ps          # –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
make health      # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ
```

## –õ–æ–≥–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
make logs-bot    # –õ–æ–≥–∏ –±–æ—Ç–∞
make logs-api    # –õ–æ–≥–∏ API
make logs-db     # –õ–æ–≥–∏ PostgreSQL
```

## –†–∞–±–æ—Ç–∞ —Å –∫–æ–¥–æ–º

```bash
# –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞:
make rebuild

# –¢–æ–ª—å–∫–æ –±–æ—Ç:
docker-compose restart bot

# –¢–æ–ª—å–∫–æ API:
docker-compose restart api
```

## –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–ë–ï–ó –ø–æ—Ç–µ—Ä–∏ –ë–î)

```bash
# –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å–ø–æ—Å–æ–± (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
./scripts/safe_redeploy.sh

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
docker-compose down && git pull && make rebuild && make logs-bot

# ‚ö†Ô∏è –ù–ï –ò–°–ü–û–õ–¨–ó–£–ô make redeploy - –æ–Ω —É–¥–∞–ª—è–µ—Ç –ë–î!
```

## –†–∞–±–æ—Ç–∞ —Å –ë–î

```bash
make backup      # –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø
make restore     # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –±—ç–∫–∞–ø
make shell-db    # –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ psql
```

## –û—Ç–ª–∞–¥–∫–∞

```bash
make shell-bot   # –ó–∞–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±–æ—Ç–∞
make shell-api   # –ó–∞–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä API
make stats       # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
```

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- Docker Compose —á–∏—Ç–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `.env.prod` (—É–∫–∞–∑–∞–Ω –≤ `env_file`)
- **–ù–ï –Ω—É–∂–Ω–æ** —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ shell –Ω–∞ —Ö–æ—Å—Ç–µ
- –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ - —Ç–æ–ª—å–∫–æ –≤ `.env.prod` —Ñ–∞–π–ª–µ

## –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫

```bash
# 1. Setup
make setup

# 2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π .env.prod
nano .env.prod

# 3. –ó–∞–ø—É—Å—Ç–∏
make up

# 4. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏
make logs

# 5. –ü—Ä–æ–≤–µ—Ä—å –∑–¥–æ—Ä–æ–≤—å–µ
make health
```

## –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (–£–î–ê–õ–ò–¢ –ë–î!)

```bash
make clean-all
```

---

**–í–æ—Ç –∏ –≤—Å—ë. Docker magic! ‚ú®**

