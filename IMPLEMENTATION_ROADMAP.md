# üöÄ –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–æ–≤—ã—Ö —Ñ–∏—á SoulNear Bot

**–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞:** 23 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∑–∞–≤–µ—Ä—à—ë–Ω ‚Üí üöÄ –ù–∞—á–∏–Ω–∞–µ–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É

---

## üéØ –¶–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞

1. **–ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ ChatCompletion API** - –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
2. **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è** - –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å** - –±–æ—Ç —É—á–∏—Ç—Å—è –∏ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. **–ò–Ω—Å–∞–π—Ç—ã** - –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∏ –¥–∏–Ω–∞–º–∏–∫–∏

---

## üìã –≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### **–≠–¢–ê–ü 1: –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ ChatCompletion API** ‚è±Ô∏è 3-5 –¥–Ω–µ–π

#### 1.1 –ú–æ–¥–µ–ª–∏ –ë–î (1 –¥–µ–Ω—å)
- [ ] –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é Alembic
- [ ] –ú–æ–¥–µ–ª—å `user_profiles`:
  ```python
  - user_id (FK)
  - tone_style (str): —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π/–¥—Ä—É–∂–µ—Å–∫–∏–π/—Å–∞—Ä–∫–∞—Å—Ç–∏—á–Ω—ã–π/–º–æ—Ç–∏–≤–∏—Ä—É—é—â–∏–π
  - personality (str): –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫/–¥—Ä—É–≥/–∫–æ—É—á
  - message_length (str): –∫—Ä–∞—Ç–∫–∏–π/—Å—Ä–µ–¥–Ω–∏–π/—Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–π
  - patterns (JSONB): –º–∞—Å—Å–∏–≤ –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
  - insights (JSONB): –∏–Ω—Å–∞–π—Ç—ã –∏–∑ –∞–Ω–∞–ª–∏–∑–∞
  - preferences (JSONB): –¥—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  - updated_at (datetime)
  ```
- [ ] –ú–æ–¥–µ–ª—å `conversation_history`:
  ```python
  - id (PK)
  - user_id (FK)
  - assistant_type (str): helper/sleeper/quiz_*
  - role (str): user/assistant/system
  - content (TEXT)
  - timestamp (datetime)
  - metadata (JSONB): —Ç–æ–∫–µ–Ω—ã, –º–æ–¥–µ–ª—å
  ```
- [ ] –ú–æ–¥–µ–ª—å `quiz_sessions`:
  ```python
  - id (PK)
  - user_id (FK)
  - quiz_type (str): relationships/money/confidence/fears
  - current_question (int)
  - answers (JSONB)
  - insights (JSONB)
  - completed (bool)
  - created_at, updated_at
  ```

#### 1.2 –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ OpenAI —Å–µ—Ä–≤–∏—Å–∞ (2 –¥–Ω—è)
- [ ] –°–æ–∑–¥–∞—Ç—å `bot/services/openai_service.py`
- [ ] –§—É–Ω–∫—Ü–∏—è `get_chat_completion()`:
  - –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ system prompt
  - –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ N —Å–æ–æ–±—â–µ–Ω–∏–π)
  - –í—ã–∑–æ–≤ ChatCompletion API
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é
- [ ] –§—É–Ω–∫—Ü–∏—è `build_system_prompt()`:
  - –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω
  - –ò–Ω–∂–µ–∫—Ç –ø—Ä–æ—Ñ–∏–ª—è (—Ç–æ–Ω, –ª–∏—á–Ω–æ—Å—Ç—å, –¥–ª–∏–Ω–∞)
  - –ò–Ω–∂–µ–∫—Ç –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
  - –ò–Ω–∂–µ–∫—Ç –∏–Ω—Å–∞–π—Ç–æ–≤
  - –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è —á–∞—Å—Ç—å –ø–æ assistant_type
- [ ] –§—É–Ω–∫—Ü–∏—è `save_message()`
- [ ] –§—É–Ω–∫—Ü–∏—è `get_conversation_history()`
- [ ] –§—É–Ω–∫—Ü–∏—è `update_user_patterns()`

#### 1.3 –ú–∏–≥—Ä–∞—Ü–∏—è —Ö–µ–Ω–¥–ª–µ—Ä–æ–≤ (1 –¥–µ–Ω—å)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `bot/functions/ChatGPT.py`:
  - –î–æ–±–∞–≤–∏—Ç—å Feature Flag: `USE_CHAT_COMPLETION`
  - `if USE_CHAT_COMPLETION: new_api() else: old_api()`
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ helper handler
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ sleeper handler
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –≤—Å–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã –Ω–∞ –Ω–æ–≤—ã–π API

#### 1.4 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (1 –¥–µ–Ω—å)
- [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è openai_service
- [ ] Integration —Ç–µ—Å—Ç—ã
- [ ] –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- [ ] –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤ (—Å—Ç–∞—Ä—ã–π vs –Ω–æ–≤—ã–π API)

---

### **–≠–¢–ê–ü 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç–∏–ª—è –æ—Ç–≤–µ—Ç–æ–≤** ‚è±Ô∏è 2-3 –¥–Ω—è

#### 2.1 –°–æ–∑–¥–∞–Ω–∏–µ UI (1 –¥–µ–Ω—å)
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/settings`
- [ ] Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞:
  ```
  üé® –¢–æ–Ω –æ–±—â–µ–Ω–∏—è
  üë§ –õ–∏—á–Ω–æ—Å—Ç—å –±–æ—Ç–∞
  üìè –î–ª–∏–Ω–∞ –æ—Ç–≤–µ—Ç–æ–≤
  ```
- [ ] –ú–µ–Ω—é –≤—ã–±–æ—Ä–∞ —Ç–æ–Ω–∞:
  - –§–æ—Ä–º–∞–ª—å–Ω—ã–π üé©
  - –î—Ä—É–∂–µ—Å–∫–∏–π üòä
  - –°–∞—Ä–∫–∞—Å—Ç–∏—á–Ω—ã–π üòè
  - –ú–æ—Ç–∏–≤–∏—Ä—É—é—â–∏–π üî•
- [ ] –ú–µ–Ω—é –≤—ã–±–æ—Ä–∞ –ª–∏—á–Ω–æ—Å—Ç–∏:
  - –ú—É–¥—Ä—ã–π –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫ üßô
  - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π –¥—Ä—É–≥ ü§ó
  - –°—Ç—Ä–æ–≥–∏–π –∫–æ—É—á üí™
- [ ] –ú–µ–Ω—é –¥–ª–∏–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π:
  - –ö—Ä–∞—Ç–∫–∏–π (1-2 –∞–±–∑–∞—Ü–∞)
  - –°—Ä–µ–¥–Ω–∏–π (3-5 –∞–±–∑–∞—Ü–µ–≤)
  - –†–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–π (–ø–æ–¥—Ä–æ–±–Ω–æ)

#### 2.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å–∏—Å—Ç–µ–º—É (1 –¥–µ–Ω—å)
- [ ] Repository –º–µ—Ç–æ–¥—ã –¥–ª—è user_profiles
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `build_system_prompt()` —Å —É—á—ë—Ç–æ–º –Ω–∞—Å—Ç—Ä–æ–µ–∫
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤ –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (handler)
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö —Å—Ç–∏–ª–µ–π

#### 2.3 –ü–æ–ª–∏—Ä–æ–≤–∫–∞ (0.5 –¥–Ω—è)
- [ ] –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—Ç–∏–ª—è
- [ ] –¢–µ–∫—Å—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–≤—å—é —Å—Ç–∏–ª—è

---

### **–≠–¢–ê–ü 3: –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø—Ä–æ—Ñ–∞–π–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** ‚è±Ô∏è 3-4 –¥–Ω—è

#### 3.1 –°–∏—Å—Ç–µ–º–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ (1.5 –¥–Ω—è)
- [ ] –°–æ–∑–¥–∞—Ç—å `bot/services/pattern_analyzer.py`
- [ ] –ü—Ä–æ–º–ø—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤:
  ```
  –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
  1. –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Ç–µ–º—ã
  2. –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
  3. –°—Ç–∏–ª—å –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
  4. –¢—Ä–∏–≥–≥–µ—Ä—ã
  5. –ü—Ä–æ–≥—Ä–µ—Å—Å/—Ä–µ–≥—Ä–µ—Å—Å
  
  –í–µ—Ä–Ω–∏ JSON: {patterns: [...], insights: [...]}
  ```
- [ ] –§—É–Ω–∫—Ü–∏—è `analyze_patterns(user_id, messages)`
- [ ] –§—É–Ω–∫—Ü–∏—è `update_profile_patterns(user_id, patterns)`

#### 3.2 –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è (1 –¥–µ–Ω—å)
- [ ] –¢—Ä–∏–≥–≥–µ—Ä –ø–æ—Å–ª–µ –∫–∞–∂–¥—ã—Ö N —Å–æ–æ–±—â–µ–Ω–∏–π (5-10)
- [ ] –¢—Ä–∏–≥–≥–µ—Ä –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏ (—Ç–∞–π–º–∞—É—Ç 30 –º–∏–Ω)
- [ ] –§–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- [ ] –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø—Ä–æ—Ñ–∏–ª—è

#### 3.3 –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è (1 –¥–µ–Ω—å)
- [ ] –ò–Ω–∂–µ–∫—Ç –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –≤ system prompt
- [ ] –ê–¥–∞–ø—Ç–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–¥ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/my_profile` - –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
- [ ] –ê–¥–º–∏–Ω –∫–æ–º–∞–Ω–¥–∞ `/debug_profile` - –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å

#### 3.4 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (0.5 –¥–Ω—è)
- [ ] –¢–µ—Å—Ç—ã –Ω–∞ –≤—ã—è–≤–ª–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
- [ ] –ö–∞—á–µ—Å—Ç–≤–æ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤

---

### **–≠–¢–ê–ü 4: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–≤–∏–∑** ‚è±Ô∏è 4-5 –¥–Ω–µ–π

#### 4.1 –ö–≤–∏–∑-—Å–µ—Ä–≤–∏—Å (2 –¥–Ω—è)
- [ ] –°–æ–∑–¥–∞—Ç—å `bot/services/quiz_service.py`
- [ ] `start_quiz(user_id, quiz_type)` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- [ ] `get_next_question(session_id)` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–∞:
  ```
  –ü—Ä–æ–º–ø—Ç:
  –ö–≤–∏–∑: {quiz_type}
  –í–æ–ø—Ä–æ—Å ‚Ññ{current_question}
  –ü—Ä–µ–¥—ã–¥—É—â–∏–µ –æ—Ç–≤–µ—Ç—ã: {answers}
  –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {patterns, insights}
  
  –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π —Å–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å —Å —É—á—ë—Ç–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.
  –í–æ–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω —É–≥–ª—É–±–∏—Ç—å –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–µ–º—ã.
  ```
- [ ] `save_answer(session_id, answer)`
- [ ] `complete_quiz(session_id)` - —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑

#### 4.2 Handlers –¥–ª—è –∫–≤–∏–∑–æ–≤ (1.5 –¥–Ω—è)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å analysis handlers (relationships, money, confidence, fears)
- [ ] State machine –¥–ª—è –∫–≤–∏–∑–∞
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö –∏–Ω—Å–∞–π—Ç–æ–≤
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ insights –≤ –ø—Ä–æ—Ñ–∏–ª—å

#### 4.3 –§–∏–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (1 –¥–µ–Ω—å)
- [ ] –ü—Ä–æ–º–ø—Ç –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞:
  ```
  –ö–≤–∏–∑: {quiz_type}
  –í—Å–µ –æ—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {answers}
  –ü—Ä–æ—Ñ–∏–ª—å: {patterns}
  
  –ü—Ä–æ–≤–µ–¥–∏ –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∏ –≤—ã–¥–∞–π:
  1. –ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
  2. –°–∫—Ä—ã—Ç—ã–µ —É–±–µ–∂–¥–µ–Ω–∏—è
  3. –¢–æ—á–∫–∏ —Ä–æ—Å—Ç–∞
  4. –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
  ```
- [ ] –ö—Ä–∞—Å–∏–≤–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- [ ] –û–ø—Ü–∏—è "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏"

#### 4.4 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (0.5 –¥–Ω—è)
- [ ] –ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ –≤—Å–µ—Ö 4 —Ç–∏–ø–æ–≤ –∫–≤–∏–∑–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤–æ–ø—Ä–æ—Å–æ–≤
- [ ] –ö–∞—á–µ—Å—Ç–≤–æ —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö –∏–Ω—Å–∞–π—Ç–æ–≤

---

### **–≠–¢–ê–ü 5: –ü—Ä–æ–∫–∞—á–µ–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã** ‚è±Ô∏è 2-3 –¥–Ω—è

#### 5.1 –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—Ä–æ–º–ø—Ç–æ–≤ (1 –¥–µ–Ω—å)
- [ ] –°–æ–∑–¥–∞—Ç—å `bot/prompts/prompts.py`
- [ ] –®–∞–±–ª–æ–Ω—ã –ø—Ä–æ–º–ø—Ç–æ–≤:
  - `HELPER_BASE` - –±–∞–∑–æ–≤—ã–π –¥–ª—è helper
  - `SLEEPER_BASE` - –±–∞–∑–æ–≤—ã–π –¥–ª—è sleeper
  - `PATTERN_ANALYSIS` - –∞–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
  - `DYNAMIC_QUIZ_*` - –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –∫–≤–∏–∑–∞
  - `INSIGHTS_GENERATION` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Å–∞–π—Ç–æ–≤
- [ ] Versioning –ø—Ä–æ–º–ø—Ç–æ–≤ (v1, v2, v3)

#### 5.2 Prompt Builder (1 –¥–µ–Ω—å)
- [ ] –ö–ª–∞—Å—Å `PromptBuilder`:
  ```python
  builder = PromptBuilder()
  builder.set_base_template('helper')
  builder.add_user_context(user_data)
  builder.add_patterns(patterns)
  builder.add_insights(insights)
  builder.add_custom_instructions(instructions)
  prompt = builder.build()
  ```
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö `{name}`, `{age}`, `{gender}`
- [ ] –£—Å–ª–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤ –ø—Ä–æ–º–ø—Ç–∞—Ö

#### 5.3 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ (1 –¥–µ–Ω—å)
- [ ] A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏–π
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤
- [ ] –°–±–æ—Ä —Ñ–∏–¥–±–µ–∫–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] –ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ

---

### **–≠–¢–ê–ü 6: –§–∞–π–Ω—Ç—é–Ω–∏–Ω–≥ —Å—Ç–∏–ª—è —Ä–µ—á–∏** ‚è±Ô∏è 2 –¥–Ω—è

#### 6.1 –ö–æ–º–∞–Ω–¥–∞ /tune_style (1 –¥–µ–Ω—å)
- [ ] Handler –¥–ª—è `/tune_style`
- [ ] –î–∏–∞–ª–æ–≥ —Å 3-5 –≤–æ–ø—Ä–æ—Å–∞–º–∏:
  1. "–ö–∞–∫ –±—ã —Ç—ã —Ö–æ—Ç–µ–ª, —á—Ç–æ–±—ã —è –æ–±—â–∞–ª—Å—è?"
  2. "–ü–æ–∫–∞–∂–∏ –ø—Ä–∏–º–µ—Ä –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞"
  3. "–ß—Ç–æ —Ç–µ–±–µ –Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –≤ –º–æ—ë–º —Å—Ç–∏–ª–µ?"
  4. "–ö–∞–∫–∏–µ —Å–ª–æ–≤–∞/—Ñ—Ä–∞–∑—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?"
  5. "–ß—Ç–æ –∏–∑–±–µ–≥–∞—Ç—å?"
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è custom instructions –∏–∑ –æ—Ç–≤–µ—Ç–æ–≤
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ø—Ä–æ—Ñ–∏–ª—å

#### 6.2 –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏ —Ñ–∏–¥–±–µ–∫ (1 –¥–µ–Ω—å)
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å—Ç–∏–ª—è (5 —Å–æ–æ–±—â–µ–Ω–∏–π)
- [ ] –ó–∞–ø—Ä–æ—Å —Ñ–∏–¥–±–µ–∫–∞: "–ö–∞–∫ —Ç–µ–±–µ –Ω–æ–≤—ã–π —Å—Ç–∏–ª—å?"
- [ ] –û–ø—Ü–∏—è –æ—Ç–∫–∞—Ç–∏—Ç—å –Ω–∞ —Å—Ç–∞—Ä—ã–π —Å—Ç–∏–ª—å
- [ ] –ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ

---

## üéØ –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ:
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ ChatCompletion –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
- ‚úÖ –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ < 3 —Å–µ–∫—É–Ω–¥
- ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ > 70%
- ‚úÖ –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤

### –ü—Ä–æ–¥—É–∫—Ç–æ–≤—ã–µ:
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç–∏–ª—è (>30%)
- ‚úÖ –ö–≤–∏–∑—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –¥–æ –∫–æ–Ω—Ü–∞ (>60%)
- ‚úÖ –ü—Ä–æ—Ñ–∏–ª—å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ
- ‚úÖ –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–∏–¥–±–µ–∫ –Ω–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—é (>80%)

---

## üìÖ –í—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞

| –≠—Ç–∞–ø | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è |
|------|-------------|-----------------|
| 1. –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ ChatCompletion | 3-5 –¥–Ω–µ–π | 28 –æ–∫—Ç—è–±—Ä—è |
| 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç–∏–ª—è | 2-3 –¥–Ω—è | 31 –æ–∫—Ç—è–±—Ä—è |
| 3. –ü—Ä–æ—Ñ–∞–π–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | 3-4 –¥–Ω—è | 4 –Ω–æ—è–±—Ä—è |
| 4. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–≤–∏–∑ | 4-5 –¥–Ω–µ–π | 9 –Ω–æ—è–±—Ä—è |
| 5. –ü—Ä–æ–∫–∞—á–µ–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã | 2-3 –¥–Ω—è | 12 –Ω–æ—è–±—Ä—è |
| 6. –§–∞–π–Ω—Ç—é–Ω–∏–Ω–≥ —Å—Ç–∏–ª—è | 2 –¥–Ω—è | 14 –Ω–æ—è–±—Ä—è |
| **–ò–¢–û–ì–û** | **16-22 –¥–Ω—è** | **14 –Ω–æ—è–±—Ä—è** |

---

## üöÄ –ù–∞—á–∏–Ω–∞–µ–º —Å –≠—Ç–∞–ø–∞ 1!

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –ë–î –¥–ª—è ChatCompletion API

–ì–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å? üòé

