<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>SoulNear</title>
    <link rel="stylesheet" href="styles.css?v=1759840111">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- <script src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js" crossorigin="anonymous"></script> --> <!-- –û—Ç–∫–ª—é—á–µ–Ω–æ –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ -->
</head>
<body>
    <!-- Splash Screen -->
    <div id="splash-screen" class="screen splash-screen active">
        <img src="robot.png" alt="SoulNear Robot" class="robot-image">
        <div class="splash-title">
            <h1>SoulNear</h1>
            <p>–¢–≤–æ–π –ø—É—Ç—å –∫ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤—É</p>
        </div>
        <div class="splash-footer">
            <p>¬© 2025 SoulNear</p>
        </div>
    </div>

    <!-- Onboarding Screen -->
    <div id="onboarding-screen" class="screen security-screen">
        <div class="lock-container">
            <img src="lock.png" alt="Security Lock" class="lock-image">
        </div>
        <div class="security-title">
            <h2>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å<br>–Ω–∞—à –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</h2>
            <p>–í—Å–µ –≤–∞—à–∏ –¥–∏–∞–ª–æ–≥–∏ —Å Soul Near –∑–∞—â–∏—â–µ–Ω—ã, –ø—Ä–∏–≤–∞—Ç–Ω—ã –∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º.</p>
        </div>
        <button class="continue-btn" onclick="showMainScreen()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
    </div>

    <!-- Main Screen -->
    <div id="main-screen" class="screen main-screen">
        <div class="main-container">
            <!-- Calendar Section -->
            <div class="calendar-section">
                <div class="month-label" id="currentMonth">–ê–ø—Ä–µ–ª—å</div>
                <div class="calendar-container">
                    <div class="calendar-days">
                        <div class="calendar-day completed" data-day="4">
                            <div class="day-circle">
                                <span class="day-number">4</span>
                            </div>
                            <span class="day-badge">üòä</span>
                        </div>
                        <div class="calendar-day completed" data-day="5">
                            <div class="day-circle">
                                <span class="day-number">5</span>
                            </div>
                            <span class="day-badge">üòê</span>
                        </div>
                        <div class="calendar-day active" data-day="6">
                            <div class="day-circle">
                                <span class="day-number">6</span>
                            </div>
                            <span class="day-badge">‚ûï</span>
                        </div>
                        <div class="calendar-day" data-day="7">
                            <div class="day-circle">
                                <span class="day-number">7</span>
                            </div>
                            <span class="day-badge">‚ûï</span>
                        </div>
                        <div class="calendar-day" data-day="8">
                            <div class="day-circle">
                                <span class="day-number">8</span>
                            </div>
                            <span class="day-badge">‚ûï</span>
                        </div>
                        <div class="calendar-day" data-day="9">
                            <div class="day-circle">
                                <span class="day-number">9</span>
                            </div>
                            <span class="day-badge">‚ûï</span>
                        </div>
                    </div>
                    <div class="calendar-indicators">
                        <div class="day-indicator" data-day="4"></div>
                        <div class="day-indicator" data-day="5"></div>
                        <div class="day-indicator active" data-day="6"></div>
                        <div class="day-indicator-placeholder" data-day="7"></div>
                        <div class="day-indicator-placeholder" data-day="8"></div>
                        <div class="day-indicator-placeholder" data-day="9"></div>
                    </div>
                </div>
            </div>

            <!-- Greeting Section -->
            <div class="greeting-section">
                <h2 id="greetingText">–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ, –ê–Ω—è!</h2>
                <p>–°–µ–≥–æ–¥–Ω—è 24-–π –¥–µ–Ω—å –≤–∞—à–µ–≥–æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è!</p>
            </div>

            <!-- Mood Section with Chart -->
            <div class="mood-section">
                <div class="mood-header">
                    <span>–ö–∞–∫ —Ç—ã —Å–µ–±—è —á—É–≤—Å—Ç–≤—É–µ—à—å —Å–µ–≥–æ–¥–Ω—è?</span>
                    <div class="mood-profile-icon">
                        <img src="icons_people.png" alt="Profile Icon" width="24" height="24">
                    </div>
                </div>
                <div class="mood-selector">
                    <div class="mood-emoji">üòÇ</div>
                    <div class="mood-emoji">ü§©</div>
                    <div class="mood-emoji">üòê</div>
                    <div class="mood-emoji">üòî</div>
                    <div class="mood-emoji">ü§Ø</div>
                </div>
                <div class="chart-container">
                    <canvas id="moodChart" width="320" height="180"></canvas>
                </div>
                <div class="chart-dates">
                    <span>24.04</span>
                    <span>25.04</span>
                    <span>26.04</span>
                    <span>27.04</span>
                    <span>28.04</span>
                    <span>29.04</span>
                    <span>30.04</span>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-item active" onclick="showMainScreen()">
                <div class="nav-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" fill="currentColor"/>
                    </svg>
                </div>
            </div>
            <div class="nav-item" onclick="showVoiceChat()">
                <div class="nav-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z" fill="currentColor"/>
                    </svg>
                </div>
            </div>
            <div class="nav-item" onclick="showPractices()">
                <div class="nav-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M6 6h4v4H6V6zm0 8h4v4H6v-4zm8-8h4v4h-4V6zm0 8h4v4h-4v-4z" fill="currentColor"/>
                    </svg>
                </div>
            </div>
            <div class="nav-item" onclick="showProfile()">
                <div class="nav-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4z" fill="currentColor"/>
                    </svg>
                </div>
            </div>
        </div>
    </div>

    <!-- Chat Screen -->
    <div id="chat-screen" class="screen chat-screen">
        <!-- Header –∫–∞–∫ –≤ –º–∞–∫–µ—Ç–µ -->
        <div class="chat-header">
            <div class="chat-left-controls">
                <button class="chat-back-btn" onclick="showVoiceChat()">‚Üê</button>
                <div class="voice-multitask-icon" onclick="showChatHistory()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <rect x="3" y="3" width="8" height="8" rx="2" fill="#4A90E2"/>
                        <rect x="13" y="3" width="8" height="8" rx="2" fill="#4A90E2"/>
                        <rect x="3" y="13" width="8" height="8" rx="2" fill="#4A90E2"/>
                        <rect x="13" y="13" width="8" height="8" rx="2" fill="#4A90E2"/>
                    </svg>
                </div>
            </div>
            <h1 class="chat-title">Soul Near GPT</h1>
            <div class="chat-avatar">
                <img src="Robo.png" alt="SoulNear Assistant" />
            </div>
        </div>

        <div class="chat-messages" id="chatMessages">
            <!-- –°–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
        </div>

        <div class="chat-input-container">
            <button class="chat-voice-btn" onclick="showScreen('general-voice-screen')">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M12 14C13.66 14 15 12.66 15 11V5C15 3.34 13.66 2 12 2C10.34 2 9 3.34 9 5V11C9 12.66 10.34 14 12 14Z" fill="white"/>
                    <path d="M19 11C19 14.53 16.39 17.44 13 17.93V21H11V17.93C7.61 17.44 5 14.53 5 11H7C7 13.76 9.24 16 12 16C14.76 16 17 13.76 17 11H19Z" fill="white"/>
                </svg>
            </button>
            <input type="text" id="chatInput" placeholder="–ß–µ–º —è –º–æ–≥—É –ø–æ–º–æ—á—å?" />
            <button class="chat-send-btn" onclick="sendChatMessage()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" fill="white"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Agent Selection Screen (–±—ã–≤—à–∏–π Voice Chat Screen) -->
    <div id="voice-chat-screen" class="screen agent-selection-screen">
        <div class="voice-header">
            <div class="voice-left-controls">
                <button class="voice-back-btn" onclick="showMainScreen()">‚Üê</button>
            </div>
            <h1 class="voice-title">–í—ã–±–µ—Ä–∏ –ø–æ–º–æ—â–Ω–∏–∫–∞</h1>
            <div class="voice-avatar">
                <img src="Robo.png" alt="SoulNear" />
            </div>
        </div>

        <div class="agent-description">
            <p>–° —á–µ–º —Ç–µ–±–µ –ø–æ–º–æ—á—å —Å–µ–≥–æ–¥–Ω—è? –í—ã–±–µ—Ä–∏ —Ç–µ–º—É –¥–ª—è —Ä–∞–±–æ—Ç—ã:</p>
        </div>

        <div class="agent-cards">
            <!-- –û–±—ã—á–Ω—ã–π —á–∞—Ç GPT -->
            <div class="agent-card general" onclick="selectAgent('general')">
                <div class="agent-card-icon">üí¨</div>
                <div class="agent-card-content">
                    <h3>–û–±—â–µ–Ω–∏–µ —Å Soul.near</h3>
                    <p>–ü–æ–¥–¥–µ—Ä–∂–∫–∞, —Å–æ–≤–µ—Ç—ã, —Ä–∞–∑–≥–æ–≤–æ—Ä –Ω–∞ –ª—é–±—ã–µ —Ç–µ–º—ã</p>
                </div>
            </div>

            <!-- –ê–Ω–∞–ª–∏–∑ –ª–∏—á–Ω–æ—Å—Ç–∏ -->
            <div class="agent-card analysis" onclick="selectAgent('analysis')">
                <div class="agent-card-icon">üë§</div>
                <div class="agent-card-content">
                    <h3>–ê–Ω–∞–ª–∏–∑ –ª–∏—á–Ω–æ—Å—Ç–∏</h3>
                    <p>–†–∞–∑–±–æ—Ä –æ—Ç–Ω–æ—à–µ–Ω–∏–π, –¥–µ–Ω–µ–≥, —Å—Ç—Ä–∞—Ö–æ–≤ –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏</p>
                </div>
            </div>

            <!-- –°–Ω—ã -->
            <div class="agent-card dreams" onclick="selectAgent('dreams')">
                <div class="agent-card-icon">üí§</div>
                <div class="agent-card-content">
                    <h3>–†–∞–±–æ—Ç–∞ —Å–æ —Å–Ω–∞–º–∏</h3>
                    <p>–ê–Ω–∞–ª–∏–∑ –∏ —Ç–æ–ª–∫–æ–≤–∞–Ω–∏–µ —Ç–≤–æ–∏—Ö —Å–Ω–æ–≤</p>
                </div>
            </div>
        </div>
    </div>

    <!-- General Chat Voice Screen -->
    <div id="general-voice-screen" class="screen voice-chat-screen">
        <div class="voice-header">
            <div class="voice-left-controls">
                <button class="voice-back-btn" onclick="showVoiceChat()">‚Üê</button>
                <div class="voice-multitask-icon" onclick="showChatHistory()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <rect x="3" y="3" width="8" height="8" rx="2" fill="#4A90E2"/>
                        <rect x="13" y="3" width="8" height="8" rx="2" fill="#4A90E2"/>
                        <rect x="3" y="13" width="8" height="8" rx="2" fill="#4A90E2"/>
                        <rect x="13" y="13" width="8" height="8" rx="2" fill="#4A90E2"/>
                    </svg>
                </div>
            </div>
            <h1 class="voice-title">Soul Near GPT</h1>
            <div class="voice-avatar">
                <img src="Robo.png" alt="SoulNear Assistant" />
            </div>
        </div>

        <div class="voice-messages" id="generalVoiceMessages">
            <!-- –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
        </div>

        <div class="voice-bottom-controls">
            <button class="voice-add-btn" onclick="createNewChat()">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M10 4V16M4 10H16" stroke="#4A90E2" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
            <button class="voice-mic-btn" onclick="toggleGeneralVoiceRecording()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M12 14C13.66 14 15 12.66 15 11V5C15 3.34 13.66 2 12 2C10.34 2 9 3.34 9 5V11C9 12.66 10.34 14 12 14Z" fill="white"/>
                    <path d="M19 11C19 14.53 16.39 17.44 13 17.93V21H11V17.93C7.61 17.44 5 14.53 5 11H7C7 13.76 9.24 16 12 16C14.76 16 17 13.76 17 11H19Z" fill="white"/>
                </svg>
            </button>
            <button class="voice-keyboard-btn" onclick="showScreen('chat-screen')">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <rect x="2" y="6" width="16" height="10" rx="2" stroke="#4A90E2" stroke-width="1.5" fill="none"/>
                    <rect x="4" y="8" width="1.5" height="1.5" rx="0.5" fill="#4A90E2"/>
                    <rect x="6.5" y="8" width="1.5" height="1.5" rx="0.5" fill="#4A90E2"/>
                    <rect x="9" y="8" width="1.5" height="1.5" rx="0.5" fill="#4A90E2"/>
                    <rect x="11.5" y="8" width="1.5" height="1.5" rx="0.5" fill="#4A90E2"/>
                    <rect x="14" y="8" width="1.5" height="1.5" rx="0.5" fill="#4A90E2"/>
                    <rect x="5" y="11" width="1.5" height="1.5" rx="0.5" fill="#4A90E2"/>
                    <rect x="7.5" y="11" width="5" height="1.5" rx="0.5" fill="#4A90E2"/>
                    <rect x="13.5" y="11" width="1.5" height="1.5" rx="0.5" fill="#4A90E2"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Practices Screen -->
    <div id="practices-screen" class="screen practices-screen">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="practices-header">
            <h1 class="practices-title">–ü—Ä–∞–∫—Ç–∏–∫–∏</h1>
        </div>

        <!-- –§–∏–ª—å—Ç—Ä—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
        <div class="practices-filters">
            <button class="filter-btn active" onclick="filterPractices('all')">–í—Å–µ</button>
            <button class="filter-btn favorite-filter" onclick="filterPractices('favorite')">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" fill="none"/>
                </svg>
            </button>
            <button class="filter-btn" onclick="filterPractices('meditation')">–ú–µ–¥–∏—Ç–∞—Ü–∏–∏</button>
            <button class="filter-btn" onclick="filterPractices('yoga')">–ô–æ–≥–∞</button>
        </div>

        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –ø—Ä–∞–∫—Ç–∏–∫ -->
        <div class="practices-content">
            <!-- –ë–ª–æ–∫ –ü–ª–∞–Ω –Ω–∞ –¥–µ–Ω—å -->
            <div class="practice-cards-row">
                <div class="practice-card plan-card">
                    <div class="card-header">
                        <h3 class="card-title">–ü–ª–∞–Ω<br>–Ω–∞ –¥–µ–Ω—å</h3>
                    </div>
                    <div class="plan-items" style="display: flex !important; flex-direction: column !important; gap: 2px !important; margin: 0 !important; padding: 0 !important;">
                        <button class="plan-item active" onclick="selectPlanItem(this)" style="padding: 6px 12px !important; border-radius: 16px !important; font-size: 12px !important; height: 32px !important; border: 1px solid #2E6BEB !important; background: #2E6BEB !important; color: white !important; cursor: pointer !important; text-align: left !important; font-weight: 500 !important; display: flex !important; align-items: center !important; justify-content: flex-start !important; margin: 0 !important; box-sizing: border-box !important; pointer-events: auto !important; position: relative !important; z-index: 10 !important;">–ê—Ñ—Ñ–∏—Ä–º–∞—Ü–∏–∏</button>
                        <button class="plan-item" onclick="selectPlanItem(this)" style="padding: 6px 12px !important; border-radius: 16px !important; font-size: 12px !important; height: 32px !important; border: 1px solid #2E6BEB !important; background: #FFFFFF !important; color: #2E6BEB !important; cursor: pointer !important; text-align: left !important; font-weight: 500 !important; display: flex !important; align-items: center !important; justify-content: flex-start !important; margin: 0 !important; box-sizing: border-box !important; pointer-events: auto !important; position: relative !important; z-index: 10 !important;">–ú–µ–¥–∏—Ç–∞—Ü–∏—è</button>
                        <button class="plan-item" onclick="selectPlanItem(this)" style="padding: 6px 12px !important; border-radius: 16px !important; font-size: 12px !important; height: 32px !important; border: 1px solid #2E6BEB !important; background: #FFFFFF !important; color: #2E6BEB !important; cursor: pointer !important; text-align: left !important; font-weight: 500 !important; display: flex !important; align-items: center !important; justify-content: flex-start !important; margin: 0 !important; box-sizing: border-box !important; pointer-events: auto !important; position: relative !important; z-index: 10 !important;">–ú–∞–Ω—Ç—Ä—ã</button>
                    </div>
                </div>

                <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –í–µ—á–µ—Ä–Ω—è—è –π–æ–≥–∞ -->
                <div class="practice-card evening-card">
                    <h3 class="evening-title">–í–µ—á–µ—Ä–Ω—è—è<br>–π–æ–≥–∞</h3>
                </div>
            </div>

            <!-- –ë–ª–æ–∫ –ú–µ–¥–∏—Ç–∞—Ü–∏—è -->
            <div class="meditation-card">
                <div class="meditation-info">
                    <h4 class="meditation-title">–ú–µ–¥–∏—Ç–∞—Ü–∏—è</h4>
                    <div class="meditation-tags">
                        <span class="tag">7 –º–∏–Ω</span>
                        <span class="tag">–£—Ç—Ä–µ–Ω–Ω—è—è</span>
                    </div>
                </div>
                <button class="meditation-play-btn" onclick="playMeditation()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M8 5V19L19 12L8 5Z" fill="white"/>
                    </svg>
                </button>
            </div>

            <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –ü—Ä–µ–≤—å—é –º–µ–¥–∏—Ç–∞—Ü–∏–∏ - –Ω–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ -->
            <div class="preview-card">
                <!-- –°—Ç–µ–∫–ª—è–Ω–Ω—ã–π –æ–≤–µ—Ä–ª–µ–π –ø–æ–≤–µ—Ä—Ö –≤—Å–µ–π –æ–±–ª–∞—Å—Ç–∏ -->
                <div class="preview-glass-overlay">
                    <span class="preview-glass-label">–ü—Ä–µ–≤—å—é</span>
                </div>

                <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ play -->
                <button class="preview-center-play-btn">
                    <svg width="40" height="40" viewBox="0 0 1800 1800" fill="none">
                        <g>
                            <path fill="#4A90E2" d="M1407.629,872.813L693.082,460.273c-9.711-5.604-21.674-5.604-31.385,0
                                c-9.712,5.609-15.693,15.968-15.693,27.182v631.583c0,17.33,14.051,31.385,31.385,31.385s31.385-14.055,31.385-31.385V541.814
                                l620.392,358.18l-555.918,320.967c-15.014,8.669-20.154,27.864-11.489,42.874c5.815,10.07,16.363,15.692,27.213,15.692
                                c5.324,0,10.719-1.357,15.662-4.203l602.995-348.148c9.711-5.609,15.692-15.969,15.692-27.182
                                C1423.321,888.781,1417.34,878.421,1407.629,872.813z"/>
                            <path fill="#4A90E2" d="M899.993,5.324c-493.322,0-894.67,401.352-894.67,894.679c0,493.322,401.348,894.674,894.67,894.674
                                c493.331,0,894.683-401.352,894.683-894.674C1794.676,406.676,1393.324,5.324,899.993,5.324z M899.993,1731.906
                                c-458.71,0-831.899-373.188-831.899-831.903S441.283,68.095,899.993,68.095c458.719,0,831.912,373.193,831.912,831.908
                                S1358.712,1731.906,899.993,1731.906z"/>
                        </g>
                    </svg>
                </button>

                <!-- –ö–Ω–æ–ø–∫–∞ —Ä—É–±–ª—è (–≤–µ—Ä—Ö —Å–ø—Ä–∞–≤–∞) -->
                <button class="preview-price" onclick="event.stopPropagation(); handlePriceClick()">‚ÇΩ</button>

                <!-- –ö–Ω–æ–ø–∫–∞ —Å–µ—Ä–¥—Ü–∞ (–Ω–∏–∑ —Å–ø—Ä–∞–≤–∞) -->
                <button class="preview-favorite" onclick="event.stopPropagation(); toggleFavorite(this)">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" stroke="#4A90E2" stroke-width="1.5" fill="none"/>
                    </svg>
                </button>

                <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ–≤–µ—Ä—Ö –≤—Å–µ–π –æ–±–ª–∞—Å—Ç–∏ -->
                <h4 class="preview-title-overlay">–ü–µ—Ä–µ–∂–∏—Ç—å —Ç—è–∂–µ–ª—ã–π –º–æ–º–µ–Ω—Ç</h4>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-item" onclick="showMainScreen()">
                <div class="nav-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" fill="currentColor"/>
                    </svg>
                </div>
            </div>
            <div class="nav-item" onclick="showVoiceChat()">
                <div class="nav-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z" fill="currentColor"/>
                    </svg>
                </div>
            </div>
            <div class="nav-item active" onclick="showPractices()">
                <div class="nav-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M6 6h4v4H6V6zm0 8h4v4H6v-4zm8-8h4v4h-4V6zm0 8h4v4h-4v-4z" fill="currentColor"/>
                    </svg>
                </div>
            </div>
            <div class="nav-item" onclick="showProfile()">
                <div class="nav-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4z" fill="currentColor"/>
                    </svg>
                </div>
            </div>
        </div>
    </div>

    <!-- Practice Player Screen -->
    <div id="practice-player-screen" class="screen">
        <div class="player-header">
            <button class="back-btn" onclick="showPractices()">‚Üê</button>
            <h3>–î—ã—Ö–∞–Ω–∏–µ</h3>
        </div>

        <div class="player-content">
            <div class="breathing-orb">
                <img src="bubble.png" class="bubble-image" alt="Breathing orb">
                <div class="breathing-text">–í–¥–æ—Ö</div>
            </div>

            <div class="player-timer">1:34</div>

            <div class="player-controls">
                <button class="player-pause-btn">‚ñ∂</button>
            </div>
        </div>
    </div>

    <!-- Chat History Screen -->
    <div id="chat-history-screen" class="screen">
        <div class="chat-history-header">
            <div class="history-left-controls">
                <button class="back-btn" onclick="goBackFromHistory()">‚Üê</button>
                <div class="chat-history-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <rect x="3" y="3" width="8" height="8" rx="2" fill="#4A90E2"/>
                        <rect x="13" y="3" width="8" height="8" rx="2" fill="#4A90E2"/>
                        <rect x="3" y="13" width="8" height="8" rx="2" fill="#4A90E2"/>
                        <rect x="13" y="13" width="8" height="8" rx="2" fill="#4A90E2"/>
                    </svg>
                </div>
            </div>
            <h3 class="chat-history-title">Soul Near GPT</h3>
            <div class="history-right-controls">
                <button class="new-chat-btn" onclick="createNewChat()">+</button>
            </div>
        </div>

        <div class="history-content">
            <div class="history-group">
                <h4 class="history-date">–°–µ–≥–æ–¥–Ω—è</h4>
                <div class="history-item" onclick="openChat(1)">–ö–∞–∫ —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å–æ —Å—Ç—Ä–µ—Å—Å–æ–º</div>
                <div class="history-item" onclick="openChat(2)">–ü—Ä–æ–±–ª–µ–º—ã –Ω–∞ —Ä–∞–±–æ—Ç–µ</div>
            </div>

            <div class="history-group">
                <h4 class="history-date">–í—á–µ—Ä–∞</h4>
                <div class="history-item" onclick="openChat(3)">–ü–æ—Å—Å–æ—Ä–∏–ª–∏—Å—å —Å –ø–∞—Ä–Ω–µ–º</div>
            </div>
        </div>

        <div class="chat-bottom-panel" style="display: none;">
            <button class="chat-new-btn" onclick="createNewChat()">+</button>
            <input type="text" class="chat-quick-input" placeholder="–ß–µ–º —è –º–æ–≥—É –ø–æ–º–æ—á—å?" />
            <button class="chat-mic-btn" onclick="startVoiceInput()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <circle cx="12" cy="12" r="10" fill="#E8F0FE"/>
                    <path d="M12 15c1.66 0 3-1.34 3-3V6c0-1.66-1.34-3-3-3S9 4.34 9 6v6c0 1.66 1.34 3 3 3z" fill="#4A90E2"/>
                    <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z" fill="#4A90E2"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Profile Screen -->
    <div id="profile-screen" class="screen profile-screen">
        <div class="profile-header">
            <h2 class="profile-title">–ü—Ä–æ—Ñ–∏–ª—å</h2>
        </div>

        <div class="profile-content">
            <div class="profile-card">
                <div class="profile-avatar-container">
                    <div class="profile-avatar" id="profile-avatar">
                        <img id="profile-avatar-img" style="display:none;" alt="Avatar">
                        <svg id="profile-avatar-placeholder" width="60" height="60" viewBox="0 0 24 24" fill="none">
                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4z" fill="#4A90E2"/>
                        </svg>
                    </div>
                </div>
                <div class="achievement-grid">
                    <div class="achievement-slot">
                        <div class="achievement-placeholder"></div>
                    </div>
                    <div class="achievement-slot">
                        <div class="achievement-placeholder"></div>
                    </div>
                </div>
            </div>

            <div class="profile-menu-block">
                <div class="profile-menu-item" onclick="showHelp()">
                    <div class="menu-item-left">
                        <div class="menu-item-icon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <circle cx="12" cy="12" r="10" stroke="#4A90E2" stroke-width="2"/>
                                <path d="M12 16v-1m0-3c0-1 1-2 2-2.5C15 9 15 8 14 7c-1.5-1.5-4-.5-4 1.5" stroke="#4A90E2" stroke-width="2" stroke-linecap="round"/>
                                <circle cx="12" cy="19" r="1" fill="#4A90E2"/>
                            </svg>
                        </div>
                        <span class="menu-item-text">–ü–æ–º–æ—â—å</span>
                    </div>
                    <div class="menu-arrow">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M9 6L15 12L9 18" stroke="#CBD5E0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                </div>
                <div class="profile-menu-item" onclick="showSupport()">
                    <div class="menu-item-left">
                        <div class="menu-item-icon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z" fill="#4A90E2"/>
                            </svg>
                        </div>
                        <span class="menu-item-text">–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Soul Near</span>
                    </div>
                    <div class="menu-arrow">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M9 6L15 12L9 18" stroke="#CBD5E0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-item" onclick="showMainScreen()">
                <div class="nav-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" fill="currentColor"/>
                    </svg>
                </div>
            </div>
            <div class="nav-item" onclick="showVoiceChat()">
                <div class="nav-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z" fill="currentColor"/>
                    </svg>
                </div>
            </div>
            <div class="nav-item" onclick="showPractices()">
                <div class="nav-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M6 6h4v4H6V6zm0 8h4v4H6v-4zm8-8h4v4h-4V6zm0 8h4v4h-4v-4z" fill="currentColor"/>
                    </svg>
                </div>
            </div>
            <div class="nav-item active" onclick="showProfile()">
                <div class="nav-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4z" fill="currentColor"/>
                    </svg>
                </div>
            </div>
        </div>
    </div>


    <!-- Daily Plan Screen -->
    <div id="daily-plan-screen" class="screen">
        <div class="plan-header">
            <div class="calendar-section">
                <div class="month-label">–ê–ø—Ä–µ–ª—å</div>
                <div class="calendar-days">
                    <div class="day-item" data-day="4">
                        <span class="day-number">4</span>
                        <span class="day-emoji">üòä</span>
                        <div class="day-indicator"></div>
                    </div>
                    <div class="day-item" data-day="5">
                        <span class="day-number">5</span>
                        <span class="day-emoji">üòê</span>
                        <div class="day-indicator"></div>
                    </div>
                    <div class="day-item active" data-day="6">
                        <span class="day-number">6</span>
                        <span class="day-emoji">‚ûï</span>
                        <div class="day-indicator active"></div>
                    </div>
                    <div class="day-item" data-day="7">
                        <span class="day-number">7</span>
                        <span class="day-emoji">‚ûï</span>
                        <div class="day-indicator"></div>
                    </div>
                    <div class="day-item" data-day="8">
                        <span class="day-number">8</span>
                        <span class="day-emoji">‚ûï</span>
                        <div class="day-indicator"></div>
                    </div>
                    <div class="day-item" data-day="9">
                        <span class="day-number">9</span>
                        <span class="day-emoji">‚ûï</span>
                        <div class="day-indicator"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="daily-plan-content">
            <h2>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –ø–ª–∞–Ω</h2>

            <div class="plan-practice">
                <div class="practice-info">
                    <h4>–ú–µ–¥–∏—Ç–∞—Ü–∏—è</h4>
                    <div class="practice-tags">
                        <span class="tag">7 –º–∏–Ω</span>
                        <span class="tag">–£—Ç—Ä–µ–Ω–Ω—è—è</span>
                    </div>
                </div>
                <button class="practice-play-btn">‚ñ∂</button>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-item active" onclick="showMainScreen()">
                <div class="nav-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" fill="currentColor"/>
                    </svg>
                </div>
            </div>
            <div class="nav-item" onclick="showVoiceChat()">
                <div class="nav-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z" fill="currentColor"/>
                    </svg>
                </div>
            </div>
            <div class="nav-item" onclick="showPractices()">
                <div class="nav-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M6 6h4v4H6V6zm0 8h4v4H6v-4zm8-8h4v4h-4V6zm0 8h4v4h-4v-4z" fill="currentColor"/>
                    </svg>
                </div>
            </div>
            <div class="nav-item" onclick="showProfile()">
                <div class="nav-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4z" fill="currentColor"/>
                    </svg>
                </div>
            </div>
        </div>
    </div>

    <!-- Analysis Selection Screen -->
    <div id="analysis-screen" class="screen voice-chat-screen">
        <div class="voice-header">
            <div class="voice-left-controls">
                <button class="voice-back-btn" onclick="showMainScreen()">‚Üê</button>
            </div>
            <h1 class="voice-title">–ê–Ω–∞–ª–∏–∑ –ª–∏—á–Ω–æ—Å—Ç–∏</h1>
            <div class="voice-avatar">
                <img src="Robo.png" alt="SoulNear" />
            </div>
        </div>

        <div class="agent-description">
            <p>–í—ã–±–µ—Ä–∏ —Ç–µ–º—É –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞:</p>
        </div>

        <div class="analysis-cards">
            <div class="analysis-card" onclick="startAnalysis('relationships')">
                <div class="analysis-icon">ü´Ç</div>
                <h3>–û—Ç–Ω–æ—à–µ–Ω–∏—è</h3>
                <p>–†–∞–∑–±–µ—Ä–∏ —Å–≤–æ–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å –ª—é–¥—å–º–∏</p>
            </div>

            <div class="analysis-card" onclick="startAnalysis('money')">
                <div class="analysis-icon">üí∏</div>
                <h3>–î–µ–Ω—å–≥–∏</h3>
                <p>–ü–æ–π–º–∏ —Å–≤–æ–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å –¥–µ–Ω—å–≥–∞–º–∏</p>
            </div>

            <div class="analysis-card" onclick="startAnalysis('confidence')">
                <div class="analysis-icon">üòé</div>
                <h3>–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å</h3>
                <p>–û–±—Ä–µ—Ç–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Å–µ–±–µ</p>
            </div>

            <div class="analysis-card" onclick="startAnalysis('fears')">
                <div class="analysis-icon">ü¶æ</div>
                <h3>–°—Ç—Ä–∞—Ö–∏</h3>
                <p>–í—ã—è—Å–Ω–∏ –∏—Å—Ç–∏–Ω–Ω—ã–µ —Å—Ç—Ä–∞—Ö–∏ –∏ –Ω–∞—É—á–∏—Å—å —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è</p>
            </div>
        </div>
    </div>

    <!-- Analysis Chat Screen -->
    <div id="analysis-chat-screen" class="screen chat-screen">
        <div class="chat-header">
            <div class="chat-left-controls">
                <button class="chat-back-btn" onclick="showScreen('analysis-screen')">‚Üê</button>
                <div class="voice-multitask-icon" onclick="showChatHistory()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <rect x="3" y="3" width="8" height="8" rx="2" fill="#4A90E2"/>
                        <rect x="13" y="3" width="8" height="8" rx="2" fill="#4A90E2"/>
                        <rect x="3" y="13" width="8" height="8" rx="2" fill="#4A90E2"/>
                        <rect x="13" y="13" width="8" height="8" rx="2" fill="#4A90E2"/>
                    </svg>
                </div>
            </div>
            <h1 class="chat-title" id="analysisTopicTitle">–ê–Ω–∞–ª–∏–∑ –æ—Ç–Ω–æ—à–µ–Ω–∏–π</h1>
            <div class="chat-avatar">
                <img src="Robo.png" alt="SoulNear" />
            </div>
        </div>

        <div class="chat-messages" id="analysisChatMessages">
            <!-- –°–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
        </div>

        <div class="chat-input-container">
            <button class="chat-voice-btn" onclick="showScreen('analysis-voice-screen')">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M12 14C13.66 14 15 12.66 15 11V5C15 3.34 13.66 2 12 2C10.34 2 9 3.34 9 5V11C9 12.66 10.34 14 12 14Z" fill="white"/>
                    <path d="M19 11C19 14.53 16.39 17.44 13 17.93V21H11V17.93C7.61 17.44 5 14.53 5 11H7C7 13.76 9.24 16 12 16C14.76 16 17 13.76 17 11H19Z" fill="white"/>
                </svg>
            </button>
            <input type="text" id="analysisInput" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." />
            <button class="chat-send-btn" onclick="sendAnalysisMessage()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" fill="white"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Analysis Voice Chat Screen -->
    <div id="analysis-voice-screen" class="screen voice-chat-screen">
        <div class="voice-header">
            <div class="voice-left-controls">
                <button class="voice-back-btn" onclick="showScreen('analysis-screen')">‚Üê</button>
                <div class="voice-multitask-icon" onclick="showChatHistory()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <rect x="3" y="3" width="8" height="8" rx="2" fill="#4A90E2"/>
                        <rect x="13" y="3" width="8" height="8" rx="2" fill="#4A90E2"/>
                        <rect x="3" y="13" width="8" height="8" rx="2" fill="#4A90E2"/>
                        <rect x="13" y="13" width="8" height="8" rx="2" fill="#4A90E2"/>
                    </svg>
                </div>
            </div>
            <h1 class="voice-title" id="analysisVoiceTitle">–ê–Ω–∞–ª–∏–∑ –æ—Ç–Ω–æ—à–µ–Ω–∏–π</h1>
            <div class="voice-avatar">
                <img src="Robo.png" alt="SoulNear Assistant" />
            </div>
        </div>

        <div class="voice-messages" id="analysisVoiceMessages">
            <!-- –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∞–Ω–∞–ª–∏–∑–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
        </div>

        <div class="voice-bottom-controls">
            <button class="voice-add-btn" onclick="createNewChat()">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M10 4V16M4 10H16" stroke="#4A90E2" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
            <button class="voice-mic-btn" onclick="toggleAnalysisVoiceRecording()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M12 14C13.66 14 15 12.66 15 11V5C15 3.34 13.66 2 12 2C10.34 2 9 3.34 9 5V11C9 12.66 10.34 14 12 14Z" fill="white"/>
                    <path d="M19 11C19 14.53 16.39 17.44 13 17.93V21H11V17.93C7.61 17.44 5 14.53 5 11H7C7 13.76 9.24 16 12 16C14.76 16 17 13.76 17 11H19Z" fill="white"/>
                </svg>
            </button>
            <button class="voice-keyboard-btn" onclick="showScreen('analysis-chat-screen')">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <rect x="2" y="6" width="16" height="10" rx="2" stroke="#4A90E2" stroke-width="1.5" fill="none"/>
                    <rect x="4" y="8" width="1.5" height="1.5" rx="0.5" fill="#4A90E2"/>
                    <rect x="6.5" y="8" width="1.5" height="1.5" rx="0.5" fill="#4A90E2"/>
                    <rect x="9" y="8" width="1.5" height="1.5" rx="0.5" fill="#4A90E2"/>
                    <rect x="11.5" y="8" width="1.5" height="1.5" rx="0.5" fill="#4A90E2"/>
                    <rect x="14" y="8" width="1.5" height="1.5" rx="0.5" fill="#4A90E2"/>
                    <rect x="5" y="11" width="1.5" height="1.5" rx="0.5" fill="#4A90E2"/>
                    <rect x="7.5" y="11" width="5" height="1.5" rx="0.5" fill="#4A90E2"/>
                    <rect x="13.5" y="11" width="1.5" height="1.5" rx="0.5" fill="#4A90E2"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Dreams Chat Screen -->
    <div id="dreams-chat-screen" class="screen chat-screen">
        <div class="chat-header">
            <div class="chat-left-controls">
                <button class="chat-back-btn" onclick="showVoiceChat()">‚Üê</button>
                <div class="voice-multitask-icon" onclick="showChatHistory()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <rect x="3" y="3" width="8" height="8" rx="2" fill="#4A90E2"/>
                        <rect x="13" y="3" width="8" height="8" rx="2" fill="#4A90E2"/>
                        <rect x="3" y="13" width="8" height="8" rx="2" fill="#4A90E2"/>
                        <rect x="13" y="13" width="8" height="8" rx="2" fill="#4A90E2"/>
                    </svg>
                </div>
            </div>
            <h1 class="chat-title">–ê–Ω–∞–ª–∏–∑ —Å–Ω–æ–≤</h1>
            <div class="chat-avatar">
                <img src="Robo.png" alt="SoulNear" />
            </div>
        </div>

        <div class="chat-messages" id="dreamsChatMessages">
            <!-- –°–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
        </div>

        <div class="chat-input-container">
            <button class="chat-voice-btn" onclick="showScreen('dreams-voice-screen')">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M12 14C13.66 14 15 12.66 15 11V5C15 3.34 13.66 2 12 2C10.34 2 9 3.34 9 5V11C9 12.66 10.34 14 12 14Z" fill="white"/>
                    <path d="M19 11C19 14.53 16.39 17.44 13 17.93V21H11V17.93C7.61 17.44 5 14.53 5 11H7C7 13.76 9.24 16 12 16C14.76 16 17 13.76 17 11H19Z" fill="white"/>
                </svg>
            </button>
            <input type="text" id="dreamsInput" placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–≤–æ—ë–º —Å–Ω–µ..." />
            <button class="chat-send-btn" onclick="sendDreamsMessage()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" fill="white"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Dreams Voice Chat Screen -->
    <div id="dreams-voice-screen" class="screen voice-chat-screen">
        <div class="voice-header">
            <div class="voice-left-controls">
                <button class="voice-back-btn" onclick="showVoiceChat()">‚Üê</button>
                <div class="voice-multitask-icon" onclick="showChatHistory()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <rect x="3" y="3" width="8" height="8" rx="2" fill="#4A90E2"/>
                        <rect x="13" y="3" width="8" height="8" rx="2" fill="#4A90E2"/>
                        <rect x="3" y="13" width="8" height="8" rx="2" fill="#4A90E2"/>
                        <rect x="13" y="13" width="8" height="8" rx="2" fill="#4A90E2"/>
                    </svg>
                </div>
            </div>
            <h1 class="voice-title">–ê–Ω–∞–ª–∏–∑ —Å–Ω–æ–≤</h1>
            <div class="voice-avatar">
                <img src="Robo.png" alt="SoulNear Assistant" />
            </div>
        </div>

        <div class="voice-messages" id="dreamsVoiceMessages">
            <!-- –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Å–Ω–∞—Ö –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
        </div>

        <div class="voice-bottom-controls">
            <button class="voice-add-btn" onclick="createNewChat()">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M10 4V16M4 10H16" stroke="#4A90E2" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
            <button class="voice-mic-btn" onclick="toggleDreamsVoiceRecording()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M12 14C13.66 14 15 12.66 15 11V5C15 3.34 13.66 2 12 2C10.34 2 9 3.34 9 5V11C9 12.66 10.34 14 12 14Z" fill="white"/>
                    <path d="M19 11C19 14.53 16.39 17.44 13 17.93V21H11V17.93C7.61 17.44 5 14.53 5 11H7C7 13.76 9.24 16 12 16C14.76 16 17 13.76 17 11H19Z" fill="white"/>
                </svg>
            </button>
            <button class="voice-keyboard-btn" onclick="showScreen('dreams-chat-screen')">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <rect x="2" y="6" width="16" height="10" rx="2" stroke="#4A90E2" stroke-width="1.5" fill="none"/>
                    <rect x="4" y="8" width="1.5" height="1.5" rx="0.5" fill="#4A90E2"/>
                    <rect x="6.5" y="8" width="1.5" height="1.5" rx="0.5" fill="#4A90E2"/>
                    <rect x="9" y="8" width="1.5" height="1.5" rx="0.5" fill="#4A90E2"/>
                    <rect x="11.5" y="8" width="1.5" height="1.5" rx="0.5" fill="#4A90E2"/>
                    <rect x="14" y="8" width="1.5" height="1.5" rx="0.5" fill="#4A90E2"/>
                    <rect x="5" y="11" width="1.5" height="1.5" rx="0.5" fill="#4A90E2"/>
                    <rect x="7.5" y="11" width="5" height="1.5" rx="0.5" fill="#4A90E2"/>
                    <rect x="13.5" y="11" width="1.5" height="1.5" rx="0.5" fill="#4A90E2"/>
                </svg>
            </button>
        </div>
    </div>

    <script src="app.js?v=1759840111"></script>
    <script>
        // Auto-update month and greeting
        function updateContent() {
            const now = new Date();
            const months = ['–Ø–Ω–≤–∞—Ä—å', '–§–µ–≤—Ä–∞–ª—å', '–ú–∞—Ä—Ç', '–ê–ø—Ä–µ–ª—å', '–ú–∞–π', '–ò—é–Ω—å',
                           '–ò—é–ª—å', '–ê–≤–≥—É—Å—Ç', '–°–µ–Ω—Ç—è–±—Ä—å', '–û–∫—Ç—è–±—Ä—å', '–ù–æ—è–±—Ä—å', '–î–µ–∫–∞–±—Ä—å'];

            // Update month
            const monthElement = document.getElementById('currentMonth');
            if (monthElement) {
                monthElement.textContent = months[now.getMonth()];
            }

            // Get user name from Telegram WebApp
            let userName = '–ê–Ω—è'; // default
            if (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.initDataUnsafe) {
                const user = window.Telegram.WebApp.initDataUnsafe.user;
                if (user && user.first_name) {
                    userName = user.first_name;
                }
            }

            // Update greeting based on time
            const hour = now.getHours();
            let greeting;
            if (hour < 6) greeting = '–î–æ–±—Ä–æ–π –Ω–æ—á–∏';
            else if (hour < 12) greeting = '–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ';
            else if (hour < 18) greeting = '–î–æ–±—Ä—ã–π –¥–µ–Ω—å';
            else greeting = '–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä';

            const greetingElement = document.getElementById('greetingText');
            if (greetingElement) {
                greetingElement.textContent = `${greeting}, ${userName}!`;
            }
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            updateContent();

            // Twemoji –æ–±—Ä–∞–±–æ—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–∞ - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞—Ç–∏–≤–Ω—ã–µ —ç–º–æ–¥–∑–∏ –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è —á–∞—Ç–∞, –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
            setTimeout(() => {
                const chatMessages = document.querySelector('.chat-messages');
                if (chatMessages) {
                    // –ó–∞–º–µ–Ω—è–µ–º twemoji –∫–∞—Ä—Ç–∏–Ω–∫–∏ –Ω–∞ –æ–±—ã—á–Ω—ã–µ —ç–º–æ–¥–∑–∏ –≤ —á–∞—Ç–µ
                    const emojiImages = chatMessages.querySelectorAll('img.emoji');
                    emojiImages.forEach(img => {
                        const alt = img.alt;
                        if (alt) {
                            const span = document.createElement('span');
                            span.textContent = alt;
                            span.style.fontFamily = 'Apple Color Emoji, Segoe UI Emoji, Noto Color Emoji, sans-serif';
                            span.style.letterSpacing = 'normal';
                            span.style.wordSpacing = 'normal';
                            img.parentNode.replaceChild(span, img);
                        }
                    });

                    // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –ø—Ä–æ–±–µ–ª—ã –≤ —Ç–µ–∫—Å—Ç–µ
                    const textNodes = [];
                    const walker = document.createTreeWalker(
                        chatMessages,
                        NodeFilter.SHOW_TEXT,
                        null,
                        false
                    );
                    let node;
                    while (node = walker.nextNode()) {
                        textNodes.push(node);
                    }

                    textNodes.forEach(textNode => {
                        if (textNode.textContent) {
                            textNode.textContent = textNode.textContent.replace(/\s+/g, ' ');
                        }
                    });
                }
            }, 100);
        });

        // Also update when Telegram WebApp is ready
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.ready();
            updateContent();
        }
    </script>
</body>
</html>